import { c as create_ssr_component, o as onDestroy, v as validate_component, e as escape, i as each } from "../../../../chunks/ssr.js";
import { S as SEO } from "../../../../chunks/SEO.js";
import "../../../../chunks/Toaster.svelte_svelte_type_style_lang.js";
const css = {
  code: "button.svelte-x37hx3{touch-action:manipulation}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<!-- \\n TODO: 创建一个红包转账界面，上方是金额展示；\\n 下方是按键，包括 0～9 的数字，以及小数点、删除和确认按钮（考虑用 grid 布局）。\\n 下方按键的数字会实时更新到上方金额展示中。\\n 同时，为了表达 lucky_money 的含义，下方数字会随机变动。\\n-->\\n\\n<script lang=\\"ts\\">import Seo from \\"$lib/modules/SEO.svelte\\";\\nimport { onMount, onDestroy } from \\"svelte\\";\\nimport toast from \\"svelte-french-toast\\";\\nlet amount = \\"0\\";\\nlet inputCount = 0;\\nlet interval;\\nlet buttonValues = [...Array(9).fill(0).map((_, i) => i + 1), \\".\\", 0, \\"\\\\u2190\\"];\\nfunction handleInput(value) {\\n  if (amount === \\"0\\" && value !== \\".\\") {\\n    if (inputCount === 0 && Number(value) > 5) {\\n      return;\\n    }\\n    amount = value;\\n    inputCount++;\\n  } else {\\n    if (value === \\".\\" && amount.includes(\\".\\")) return;\\n    if (value === \\".\\" && amount === \\"0\\") {\\n      amount = \\"0.\\";\\n    } else {\\n      amount += value;\\n      if (value !== \\".\\") {\\n        inputCount++;\\n      }\\n    }\\n  }\\n  console.log(`inputCount:`, inputCount);\\n}\\nfunction handleDelete() {\\n  if (amount.length === 1) {\\n    amount = \\"0\\";\\n    inputCount = 0;\\n  } else {\\n    amount = amount.slice(0, -1);\\n    inputCount = Math.max(0, inputCount - 1);\\n  }\\n}\\nfunction handleClear() {\\n  amount = \\"0\\";\\n  inputCount = 0;\\n}\\nfunction handleConfirm() {\\n  toast.success(`\\\\u786E\\\\u8BA4\\\\u8F6C\\\\u8D26\\\\u91D1\\\\u989D \\\\xA5${Number(amount).toFixed(2)}`);\\n}\\nfunction startRandomEffect() {\\n  const weights = [15, 30, 10, 6, 4, 1, 1, 1, 1, 1];\\n  const numberPool = weights.flatMap(\\n    (weight, number) => Array(weight).fill(number)\\n  );\\n  const specialChars = [\\n    \\".\\",\\n    \\"\\\\u2190\\",\\n    \\".\\",\\n    \\"\\\\u2190\\",\\n    \\"\\\\u2190\\",\\n    \\"\\\\u2190\\",\\n    \\"\\\\u2190\\",\\n    \\"\\\\u2190\\"\\n  ];\\n  const fullPool = [...numberPool, ...specialChars];\\n  console.log(`fullPool:`, fullPool);\\n  interval = setInterval(() => {\\n    let pool = [...fullPool];\\n    if (inputCount < 1) {\\n      pool = pool.filter((num) => isNaN(Number(num)) || Number(num) <= 5);\\n    }\\n    buttonValues = buttonValues.map((value) => {\\n      if (Math.random() > 0.7) {\\n        const randomIndex = Math.floor(Math.random() * pool.length);\\n        return pool[randomIndex];\\n      }\\n      return value;\\n    });\\n  }, 300);\\n}\\nonMount(() => {\\n  startRandomEffect();\\n});\\nonDestroy(() => {\\n  if (interval) clearInterval(interval);\\n});\\n<\/script>\\n\\n<Seo title=\'幸运红包\' />\\n\\n\\n<div class=\\"min-h-screen p-4\\nflex justify-center items-center\\n\\">\\n  <div class=\\"max-w-md mx-auto bg-white rounded-xl shadow-lg overflow-hidden w-full sm:min-w-96\\">\\n    <!-- 金额显示区域 -->\\n    <div class=\\"p-8 bg-red-500 text-white\\">\\n      <div class=\\"text-sm mb-2\\">金额</div>\\n      <div class=\\"text-4xl font-bold\\">¥ {amount}</div>\\n    </div>\\n\\n    <!-- 数字键盘 -->\\n    <div class=\\"\\">\\n      <div class=\\"grid grid-cols-3 border-l border-t border-gray-200\\">\\n        {#each buttonValues as value}\\n          {#if value === \'←\'}\\n            <button \\n              class=\\"text-black hover:bg-gray-100 p-4 py-6 text-xl font-semibold \\n              border-b border-r border-gray-200\\"\\n              on:click={handleDelete}\\n            >\\n              {value}\\n            </button>\\n          {:else}\\n            <button \\n              class=\\"number-btn text-black hover:bg-gray-100 \\n              p-4 py-6 text-xl font-semibold \\n              border-b border-r border-gray-200\\"\\n              on:click={() => handleInput(value.toString())}\\n            >\\n              {value}\\n            </button>\\n          {/if}\\n        {/each}\\n\\n        <button \\n          class=\\"col-span-1 text-black bg-gray-100 hover:bg-gray-200 p-4 text-xl font-semibold\\n          border-r border-gray-200\\"\\n          on:click={handleClear}\\n        >\\n          清空\\n        </button>\\n        <button \\n          class=\\"col-span-2 bg-red-500 hover:bg-red-600 p-4 text-xl font-semibold text-white\\"\\n          on:click={handleConfirm}\\n        >\\n          确认\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<style>\\n  button {\\n    touch-action: manipulation;\\n  }\\n</style>"],"names":[],"mappings":"AAiJE,oBAAO,CACL,YAAY,CAAE,YAChB"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let amount = "0";
  let buttonValues = [...Array(9).fill(0).map((_, i) => i + 1), ".", 0, "←"];
  onDestroy(() => {
  });
  $$result.css.add(css);
  return `  ${validate_component(SEO, "Seo").$$render($$result, { title: "幸运红包" }, {}, {})} <div class="min-h-screen p-4 flex justify-center items-center "><div class="max-w-md mx-auto bg-white rounded-xl shadow-lg overflow-hidden w-full sm:min-w-96"> <div class="p-8 bg-red-500 text-white"><div class="text-sm mb-2" data-svelte-h="svelte-fpy95b">金额</div> <div class="text-4xl font-bold">¥ ${escape(amount)}</div></div>  <div class=""><div class="grid grid-cols-3 border-l border-t border-gray-200">${each(buttonValues, (value) => {
    return `${value === "←" ? `<button class="text-black hover:bg-gray-100 p-4 py-6 text-xl font-semibold border-b border-r border-gray-200 svelte-x37hx3">${escape(value)} </button>` : `<button class="number-btn text-black hover:bg-gray-100 p-4 py-6 text-xl font-semibold border-b border-r border-gray-200 svelte-x37hx3">${escape(value)} </button>`}`;
  })} <button class="col-span-1 text-black bg-gray-100 hover:bg-gray-200 p-4 text-xl font-semibold border-r border-gray-200 svelte-x37hx3" data-svelte-h="svelte-1y75s62">清空</button> <button class="col-span-2 bg-red-500 hover:bg-red-600 p-4 text-xl font-semibold text-white svelte-x37hx3" data-svelte-h="svelte-78igbn">确认</button></div></div></div> </div>`;
});
export {
  Page as default
};
